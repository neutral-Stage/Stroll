<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Stroll â€” A calm, relaxing browser-based 3D city walk at golden hour. Built with Three.js.">
    <meta name="theme-color" content="#1a1a2e">
    <title>Stroll â€” A Peaceful City Walk</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸŒ‡</text></svg>">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Cinematic Intro Overlay -->
    <div id="cinematic-overlay">
        <div id="cinematic-title">Stroll</div>
        <div id="cinematic-subtitle">a peaceful city walk</div>
        <div id="cinematic-skip">Press any key to skip</div>
    </div>

    <!-- UI Overlay -->
    <div id="ui-overlay">
        <div id="title">Stroll</div>
        <div id="subtitle">a peaceful city walk</div>
        <div id="controls-hint">
            <span class="key">W A S D</span> or <span class="key">â†‘ â† â†“ â†’</span> to walk
            <br><span class="key">Mouse</span> to look around
            <br><span class="key">M</span> sound Â· <span class="key">P</span> photo Â· <span class="key">N</span> meditate
            <br><span class="key">J</span> journal Â· <span class="key">Esc</span> pause
            <br><span class="key">Click</span> to start
        </div>
        <div id="thought-bubble"></div>
        <div id="sound-toggle" role="button" aria-label="Toggle ambient sound" tabindex="0" title="Toggle ambient sound (M)">ğŸ”‡</div>
        <!-- Crosshair for orientation -->
        <div id="crosshair"></div>
    </div>

    <!-- HUD -->
    <div id="hud">
        <div id="hud-left">
            <div class="hud-item" title="Score">
                <span class="hud-icon">âœ¨</span>
                <span id="hud-score">0</span>
            </div>
            <div class="hud-item" title="Collectibles">
                <span class="hud-icon">ğŸ’</span>
                <span id="hud-collected">0/0</span>
            </div>
            <div class="hud-item" title="Waypoints">
                <span class="hud-icon">ğŸ“</span>
                <span id="hud-waypoints">0/0</span>
            </div>
        </div>
        <div id="hud-center">
            <div id="compass">
                <div id="compass-ring">
                    <div id="compass-needle"></div>
                    <span id="compass-n">N</span>
                </div>
                <div id="compass-dir">N</div>
            </div>
        </div>
        <div id="hud-right">
            <div class="hud-item" title="Time of Day">
                <span class="hud-icon">ğŸŒ…</span>
                <span id="hud-time">Golden Hour</span>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container"></div>

    <!-- Photo Mode UI -->
    <div id="photo-mode-ui" style="display:none;">
        <div id="photo-mode-header">ğŸ“¸ Photo Mode</div>
        <div id="photo-mode-controls">
            <span>Mouse: Orbit</span> Â· <span>Scroll: Zoom</span>
            <br><span class="key">F</span> Filter: <span id="filter-name">None</span>
            <br><span class="key">Space</span> Take Photo
            <br><span class="key">P</span> Exit
        </div>
        <div id="photo-vignette"></div>
    </div>

    <!-- Meditation UI -->
    <div id="meditation-ui" style="display:none;">
        <div id="meditation-header">ğŸ§˜ Meditation</div>
        <div id="meditation-hint">Press N to exit</div>
    </div>

    <!-- Breathing Guide -->
    <div id="breathing-guide" style="display:none;">
        <div id="breathing-circle"></div>
        <div id="breathing-text">Breathe in...</div>
    </div>

    <!-- Pause Menu -->
    <div id="pause-menu" style="display:none;">
        <div id="pause-content">
            <div id="pause-title">â¸ Paused</div>
            <button id="pause-resume" class="pause-btn">Resume</button>
            <div id="pause-stats"></div>
            <div id="pause-controls-info">
                <div><span class="key">W A S D</span> Walk</div>
                <div><span class="key">P</span> Photo Mode</div>
                <div><span class="key">N</span> Meditation</div>
                <div><span class="key">J</span> Journal</div>
                <div><span class="key">M</span> Toggle Sound</div>
                <div><span class="key">Esc</span> Pause/Resume</div>
                <div><span class="key">Click</span> Interact with flowers</div>
            </div>
        </div>
    </div>

    <!-- Discovery Journal -->
    <div id="journal-overlay" style="display:none;">
        <div id="journal-content">
            <div id="journal-header">
                <span>ğŸ“– Discovery Journal</span>
                <button id="journal-close" class="journal-btn">âœ•</button>
            </div>
            <div id="journal-tabs">
                <button class="journal-tab active" data-tab="discoveries">Discoveries</button>
                <button class="journal-tab" data-tab="achievements">Achievements</button>
            </div>
            <div id="journal-discoveries" class="journal-section"></div>
            <div id="journal-achievements" class="journal-section" style="display:none;"></div>
        </div>
    </div>

    <!-- Loading screen with progress bar -->
    <div id="loading-screen">
        <div id="loading-content">
            <div id="loading-title">ğŸŒ‡</div>
            <div id="loading-text">Loading your peaceful walk...</div>
            <div id="loading-bar">
                <div id="loading-bar-fill"></div>
            </div>
        </div>
    </div>

    <!-- Mobile controls -->
    <div id="mobile-controls">
        <div id="joystick-area">
            <div id="joystick-base">
                <div id="joystick-thumb"></div>
            </div>
        </div>
    </div>

    <!-- Import map so bare "three" specifiers inside CDN addons resolve correctly -->
    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
        }
    }
    </script>

    <!-- ES Module entry point (Three.js loaded via import map) -->
    <script type="module" src="js/main.js"></script>
</body>
</html>
